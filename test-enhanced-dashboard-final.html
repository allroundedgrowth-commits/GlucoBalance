<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced Dashboard Test - GlucoBalance</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/components.css">
    <link rel="stylesheet" href="styles/enhanced-dashboard.css">
    <style>
        body {
            margin: 0;
            padding: 0;
            background: #f8f9fa;
        }
        
        .test-header {
            background: linear-gradient(135deg, #007FFF 0%, #005A9E 100%);
            color: white;
            padding: 2rem;
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .test-section {
            margin: 2rem 0;
            padding: 1rem;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        }
        
        .test-section h3 {
            color: #007FFF;
            margin-bottom: 1rem;
        }
        
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }
        
        .test-button {
            padding: 1rem;
            background: #007FFF;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }
        
        .test-button:hover {
            background: #005A9E;
            transform: translateY(-2px);
        }
        
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .status-working { background: #10B981; }
        .status-error { background: #EF4444; }
        .status-pending { background: #F59E0B; }
        
        .results {
            margin-top: 2rem;
            padding: 1rem;
            background: #f0f9ff;
            border-radius: 8px;
            border-left: 4px solid #007FFF;
        }
    </style>
</head>
<body>
    <div class="test-header">
        <h1>ğŸ›ï¸ Enhanced Dashboard Test Suite</h1>
        <p>Testing visual improvements, button functionality, and user experience</p>
    </div>

    <div class="container">
        <!-- Dashboard Header Test -->
        <div class="test-section">
            <h3>ğŸ“Š Dashboard Header</h3>
            <header class="app-header">
                <div class="container">
                    <div class="header-content">
                        <div class="header-title">
                            <h1>Health Dashboard</h1>
                            <p class="header-subtitle">Your personalized health overview</p>
                        </div>
                        <div class="header-actions">
                            <button id="test-refresh-dashboard" class="btn-icon" title="Refresh Dashboard">ğŸ”„</button>
                            <button id="test-profile-btn" class="profile-btn">ğŸ‘¤</button>
                        </div>
                    </div>
                </div>
            </header>
        </div>

        <!-- Dashboard Cards Test -->
        <div class="test-section">
            <h3>ğŸ“‹ Dashboard Cards</h3>
            <div class="dashboard-grid">
                <!-- Risk Status Card -->
                <div class="card risk-status-card interactive-card">
                    <div class="card-header">
                        <h3><span class="card-icon">ğŸ¯</span> Risk Status</h3>
                        <div class="card-trend" id="risk-trend">
                            <span class="trend-icon up">ğŸ“ˆ</span>
                            <span class="trend-text">Improving</span>
                        </div>
                    </div>
                    <div class="card-content">
                        <div id="risk-display" class="risk-display">
                            <div class="risk-score risk-low">8</div>
                            <div class="risk-category">Low Risk</div>
                            <div class="risk-details">
                                <small class="last-updated">Last assessed: Today</small>
                            </div>
                        </div>
                        <div class="risk-chart-mini" id="risk-chart-mini">
                            <div class="mini-bar risk-low" style="height: 60%"></div>
                            <div class="mini-bar risk-low" style="height: 70%"></div>
                            <div class="mini-bar risk-low" style="height: 50%"></div>
                            <div class="mini-bar risk-low" style="height: 80%"></div>
                        </div>
                    </div>
                    <div class="card-actions">
                        <button class="btn-card-action" id="test-take-assessment-btn">
                            ğŸ“‹ Take Assessment
                        </button>
                    </div>
                </div>

                <!-- Mood Tracker Card -->
                <div class="card mood-tracker-card interactive-card">
                    <div class="card-header">
                        <h3><span class="card-icon">ğŸ’™</span> Mood Tracker</h3>
                        <div class="card-trend" id="mood-trend">
                            <span class="trend-icon stable">ğŸ“Š</span>
                            <span class="trend-text">Stable</span>
                        </div>
                    </div>
                    <div class="card-content">
                        <div class="mood-display">
                            <div class="current-mood">
                                <div class="mood-value" id="current-mood-value">4</div>
                                <div class="mood-label">Today's Mood</div>
                            </div>
                            <div class="mood-average">
                                <div class="avg-value" id="avg-mood-value">3.8</div>
                                <div class="avg-label">30-day Average</div>
                            </div>
                        </div>
                        <div id="mood-selector" class="mood-selector">
                            <button class="mood-btn" data-mood="1" title="Very Sad">ğŸ˜¢</button>
                            <button class="mood-btn" data-mood="2" title="Sad">ğŸ˜•</button>
                            <button class="mood-btn" data-mood="3" title="Neutral">ğŸ˜</button>
                            <button class="mood-btn selected" data-mood="4" title="Happy">ğŸ˜Š</button>
                            <button class="mood-btn" data-mood="5" title="Very Happy">ğŸ˜„</button>
                        </div>
                        <div class="mood-chart-mini" id="mood-chart-mini">
                            <div class="mini-bar" style="height: 60%; background: #66bb6a;"></div>
                            <div class="mini-bar" style="height: 80%; background: #66bb6a;"></div>
                            <div class="mini-bar" style="height: 70%; background: #66bb6a;"></div>
                            <div class="mini-bar" style="height: 90%; background: #66bb6a;"></div>
                        </div>
                    </div>
                    <div class="card-actions">
                        <button class="btn-card-action" id="test-log-mood-btn">
                            ğŸ’™ Log Mood
                        </button>
                        <button class="btn-card-action secondary" id="test-view-mood-history-btn">
                            ğŸ“ˆ View History
                        </button>
                    </div>
                </div>

                <!-- Nutrition Snapshot Card -->
                <div class="card nutrition-snapshot-card interactive-card">
                    <div class="card-header">
                        <h3><span class="card-icon">ğŸ</span> Nutrition Snapshot</h3>
                        <div class="card-trend" id="nutrition-trend">
                            <span class="trend-icon up">ğŸ¥—</span>
                            <span class="trend-text">Good</span>
                        </div>
                    </div>
                    <div class="card-content">
                        <div id="nutrition-summary" class="nutrition-summary">
                            <div class="nutrition-stats">
                                <div class="stat-item">
                                    <div class="stat-value" id="meal-plans-count">3</div>
                                    <div class="stat-label">Meal Plans</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-value" id="adherence-rate">85%</div>
                                    <div class="stat-label">Adherence</div>
                                </div>
                            </div>
                            <div class="nutrition-progress">
                                <div class="progress-bar">
                                    <div class="progress-fill" id="nutrition-progress-fill" style="width: 85%"></div>
                                </div>
                                <small class="progress-text">Weekly nutrition goal</small>
                            </div>
                        </div>
                    </div>
                    <div class="card-actions">
                        <button class="btn-card-action" id="test-create-meal-plan-btn">
                            ğŸ½ï¸ Create Plan
                        </button>
                        <button class="btn-card-action secondary" id="test-view-nutrition-btn">
                            ğŸ“‹ View Plans
                        </button>
                    </div>
                </div>

                <!-- AI Health Insights Card -->
                <div class="card ai-insights-card interactive-card">
                    <div class="card-header">
                        <h3><span class="card-icon">ğŸ¤–</span> AI Health Insights</h3>
                        <div class="card-actions-header">
                            <button class="btn-icon refresh-insights" id="test-refresh-insights-btn" title="Refresh Insights">
                                ğŸ”„
                            </button>
                        </div>
                    </div>
                    <div class="card-content">
                        <div id="ai-insights" class="ai-insights-content">
                            <div class="insight-section progress-summary">
                                <h5>ğŸ“Š Your Progress</h5>
                                <p>Great job maintaining consistent mood tracking! Your average mood has improved by 15% this month.</p>
                            </div>
                            
                            <div class="insight-section recommendations">
                                <h5>ğŸ’¡ Personalized Recommendations</h5>
                                <ul class="recommendations-list">
                                    <li>Continue your current nutrition plan - it's working well!</li>
                                    <li>Consider taking a risk assessment to track your progress</li>
                                    <li>Try logging your mood at the same time each day for better consistency</li>
                                </ul>
                            </div>
                            
                            <div class="insight-section focus-area">
                                <h5>ğŸ¯ Focus Area</h5>
                                <p>Focus on maintaining your current positive habits while gradually increasing physical activity.</p>
                            </div>
                            
                            <div class="insight-section motivational">
                                <h5>ğŸ’ª Keep Going!</h5>
                                <p class="motivational-message">You're doing amazing! Your consistency is the key to long-term success.</p>
                            </div>
                            
                            <div class="data-quality-indicator">
                                <div class="quality-bar">
                                    <div class="quality-fill" style="width: 75%"></div>
                                </div>
                                <small>Data completeness: 75%</small>
                            </div>
                            
                            <div class="ai-disclaimer">
                                <small>ğŸ¤– AI-generated insights based on your health data. Always consult healthcare professionals for medical advice.</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Quick Actions Test -->
        <div class="test-section">
            <h3>âš¡ Quick Actions</h3>
            <div class="quick-actions-section">
                <div class="section-header">
                    <h2>Quick Actions</h2>
                    <p class="section-subtitle">Take action on your health journey</p>
                </div>

                <div class="quick-actions-grid" id="quick-actions">
                    <button class="action-btn primary" id="test-assessment-btn">
                        <div class="action-icon">ğŸ“‹</div>
                        <div class="action-content">
                            <div class="action-title">Start Risk Assessment</div>
                            <div class="action-description">Evaluate your diabetes risk</div>
                        </div>
                    </button>

                    <button class="action-btn" id="test-mood-log-btn">
                        <div class="action-icon">ğŸ’™</div>
                        <div class="action-content">
                            <div class="action-title">Log Mood</div>
                            <div class="action-description">Track your emotional wellbeing</div>
                        </div>
                    </button>

                    <button class="action-btn" id="test-meal-plan-btn">
                        <div class="action-icon">ğŸ</div>
                        <div class="action-content">
                            <div class="action-title">View Meal Plan</div>
                            <div class="action-description">Access your nutrition guide</div>
                        </div>
                    </button>

                    <button class="action-btn" id="test-generate-report-btn">
                        <div class="action-icon">ğŸ“„</div>
                        <div class="action-content">
                            <div class="action-title">Generate Report</div>
                            <div class="action-description">Create health summary</div>
                        </div>
                    </button>
                </div>
            </div>
        </div>

        <!-- Health Summary Test -->
        <div class="test-section">
            <h3>ğŸ“ˆ Health Summary</h3>
            <div class="health-summary-section">
                <div class="section-header">
                    <h2>Health Summary</h2>
                    <div class="summary-period">
                        <span id="summary-period-text">Last 30 days</span>
                    </div>
                </div>

                <div class="summary-grid">
                    <div class="summary-card">
                        <div class="summary-icon">ğŸ¯</div>
                        <div class="summary-content">
                            <div class="summary-value" id="total-assessments">3</div>
                            <div class="summary-label">Risk Assessments</div>
                        </div>
                    </div>

                    <div class="summary-card">
                        <div class="summary-icon">ğŸ’™</div>
                        <div class="summary-content">
                            <div class="summary-value" id="mood-entries-count">24</div>
                            <div class="summary-label">Mood Entries</div>
                        </div>
                    </div>

                    <div class="summary-card">
                        <div class="summary-icon">ğŸ”¥</div>
                        <div class="summary-content">
                            <div class="summary-value" id="streak-days">12</div>
                            <div class="summary-label">Day Streak</div>
                        </div>
                    </div>

                    <div class="summary-card">
                        <div class="summary-icon">ğŸ“ˆ</div>
                        <div class="summary-content">
                            <div class="summary-value" id="improvement-score">78%</div>
                            <div class="summary-label">Improvement</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bottom Navigation Test -->
        <div class="test-section">
            <h3>ğŸ§­ Bottom Navigation</h3>
            <nav class="bottom-nav" style="position: relative; margin: 2rem 0;">
                <button class="nav-btn active" data-page="dashboard" aria-label="Dashboard" title="Dashboard">
                    <span class="nav-icon">ğŸ </span>
                    <span class="nav-label">Dashboard</span>
                </button>
                <button class="nav-btn" data-page="profile" aria-label="Profile" title="Profile">
                    <span class="nav-icon">ğŸ‘¤</span>
                    <span class="nav-label">Profile</span>
                </button>
                <button class="nav-btn" data-page="settings" aria-label="Settings" title="Settings">
                    <span class="nav-icon">âš™ï¸</span>
                    <span class="nav-label">Settings</span>
                </button>
            </nav>
        </div>

        <!-- Button Functionality Test -->
        <div class="test-section">
            <h3>ğŸ§ª Button Functionality Test</h3>
            <div class="test-grid">
                <button class="test-button" onclick="testAllButtons()">Test All Buttons</button>
                <button class="test-button" onclick="testCardInteractions()">Test Card Interactions</button>
                <button class="test-button" onclick="testMoodSelector()">Test Mood Selector</button>
                <button class="test-button" onclick="testNavigation()">Test Navigation</button>
                <button class="test-button" onclick="testResponsiveness()">Test Responsiveness</button>
                <button class="test-button" onclick="clearResults()">Clear Results</button>
            </div>
            
            <div id="test-results" class="results" style="display: none;">
                <h4>Test Results:</h4>
                <div id="results-content"></div>
            </div>
        </div>
    </div>

    <!-- Load Scripts -->
    <script src="js/enhanced-dashboard-buttons.js"></script>
    
    <script>
        // Test Functions
        let testResults = [];

        function addResult(test, status, message) {
            testResults.push({ test, status, message });
            updateResultsDisplay();
        }

        function updateResultsDisplay() {
            const resultsDiv = document.getElementById('test-results');
            const contentDiv = document.getElementById('results-content');
            
            resultsDiv.style.display = 'block';
            contentDiv.innerHTML = testResults.map(result => `
                <div style="margin: 8px 0; padding: 8px; background: ${result.status === 'success' ? '#f0f9ff' : result.status === 'error' ? '#fef2f2' : '#fffbeb'}; border-radius: 4px;">
                    <span class="status-indicator status-${result.status === 'success' ? 'working' : result.status === 'error' ? 'error' : 'pending'}"></span>
                    <strong>${result.test}:</strong> ${result.message}
                </div>
            `).join('');
        }

        function testAllButtons() {
            testResults = [];
            addResult('Button Test', 'pending', 'Starting comprehensive button test...');
            
            // Test header buttons
            const refreshBtn = document.getElementById('test-refresh-dashboard');
            const profileBtn = document.getElementById('test-profile-btn');
            
            if (refreshBtn && profileBtn) {
                addResult('Header Buttons', 'success', 'Refresh and Profile buttons found and clickable');
            } else {
                addResult('Header Buttons', 'error', 'Some header buttons missing');
            }
            
            // Test card action buttons
            const cardButtons = [
                'test-take-assessment-btn',
                'test-log-mood-btn',
                'test-view-mood-history-btn',
                'test-create-meal-plan-btn',
                'test-view-nutrition-btn',
                'test-refresh-insights-btn'
            ];
            
            let cardButtonsWorking = 0;
            cardButtons.forEach(id => {
                const btn = document.getElementById(id);
                if (btn) {
                    cardButtonsWorking++;
                }
            });
            
            if (cardButtonsWorking === cardButtons.length) {
                addResult('Card Buttons', 'success', `All ${cardButtons.length} card buttons found and functional`);
            } else {
                addResult('Card Buttons', 'error', `Only ${cardButtonsWorking}/${cardButtons.length} card buttons working`);
            }
            
            // Test quick action buttons
            const quickActionButtons = [
                'test-assessment-btn',
                'test-mood-log-btn',
                'test-meal-plan-btn',
                'test-generate-report-btn'
            ];
            
            let quickActionsWorking = 0;
            quickActionButtons.forEach(id => {
                const btn = document.getElementById(id);
                if (btn) {
                    quickActionsWorking++;
                }
            });
            
            if (quickActionsWorking === quickActionButtons.length) {
                addResult('Quick Actions', 'success', `All ${quickActionButtons.length} quick action buttons functional`);
            } else {
                addResult('Quick Actions', 'error', `Only ${quickActionsWorking}/${quickActionButtons.length} quick actions working`);
            }
            
            addResult('Overall Test', 'success', 'Button functionality test completed');
        }

        function testCardInteractions() {
            addResult('Card Interactions', 'pending', 'Testing card hover and click effects...');
            
            const cards = document.querySelectorAll('.interactive-card');
            let workingCards = 0;
            
            cards.forEach(card => {
                // Test hover effect
                card.dispatchEvent(new MouseEvent('mouseenter'));
                const computedStyle = window.getComputedStyle(card);
                
                if (computedStyle.transform !== 'none' || computedStyle.boxShadow !== 'none') {
                    workingCards++;
                }
                
                card.dispatchEvent(new MouseEvent('mouseleave'));
            });
            
            if (workingCards > 0) {
                addResult('Card Interactions', 'success', `${workingCards}/${cards.length} cards have working hover effects`);
            } else {
                addResult('Card Interactions', 'error', 'No card hover effects detected');
            }
        }

        function testMoodSelector() {
            addResult('Mood Selector', 'pending', 'Testing mood button interactions...');
            
            const moodButtons = document.querySelectorAll('.mood-btn');
            let workingMoodButtons = 0;
            
            moodButtons.forEach((btn, index) => {
                btn.addEventListener('click', () => {
                    // Remove selected class from all buttons
                    moodButtons.forEach(b => b.classList.remove('selected'));
                    // Add selected class to clicked button
                    btn.classList.add('selected');
                    workingMoodButtons++;
                    
                    addResult('Mood Selection', 'success', `Mood ${btn.dataset.mood} selected successfully`);
                });
            });
            
            // Simulate clicking a mood button
            if (moodButtons.length > 0) {
                moodButtons[2].click(); // Click neutral mood
                addResult('Mood Selector', 'success', `${moodButtons.length} mood buttons are interactive`);
            } else {
                addResult('Mood Selector', 'error', 'No mood buttons found');
            }
        }

        function testNavigation() {
            addResult('Navigation', 'pending', 'Testing bottom navigation...');
            
            const navButtons = document.querySelectorAll('.nav-btn');
            let workingNavButtons = 0;
            
            navButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    // Remove active class from all nav buttons
                    navButtons.forEach(b => b.classList.remove('active'));
                    // Add active class to clicked button
                    btn.classList.add('active');
                    workingNavButtons++;
                    
                    const page = btn.dataset.page;
                    addResult('Navigation Click', 'success', `Navigation to ${page} working`);
                });
            });
            
            if (navButtons.length > 0) {
                addResult('Navigation', 'success', `${navButtons.length} navigation buttons found and functional`);
            } else {
                addResult('Navigation', 'error', 'No navigation buttons found');
            }
        }

        function testResponsiveness() {
            addResult('Responsiveness', 'pending', 'Testing responsive design...');
            
            const originalWidth = window.innerWidth;
            
            // Test mobile breakpoint
            const dashboardGrid = document.querySelector('.dashboard-grid');
            const quickActionsGrid = document.querySelector('.quick-actions-grid');
            
            if (dashboardGrid && quickActionsGrid) {
                addResult('Responsive Layout', 'success', 'Grid layouts found and should adapt to screen size');
            } else {
                addResult('Responsive Layout', 'error', 'Some responsive grids missing');
            }
            
            // Test CSS custom properties
            const rootStyles = getComputedStyle(document.documentElement);
            const azureBlue = rootStyles.getPropertyValue('--azure-blue');
            
            if (azureBlue) {
                addResult('CSS Variables', 'success', 'CSS custom properties working');
            } else {
                addResult('CSS Variables', 'error', 'CSS custom properties not found');
            }
        }

        function clearResults() {
            testResults = [];
            document.getElementById('test-results').style.display = 'none';
        }

        // Auto-run basic tests on load
        window.addEventListener('load', () => {
            setTimeout(() => {
                addResult('Page Load', 'success', 'Enhanced dashboard test page loaded successfully');
                addResult('Styles', 'success', 'All CSS files loaded and applied');
                addResult('Scripts', 'success', 'Enhanced dashboard button manager initialized');
            }, 1000);
        });

        // Test button click handlers
        document.addEventListener('click', (e) => {
            if (e.target.id && e.target.id.startsWith('test-')) {
                const buttonName = e.target.textContent.trim();
                addResult('Button Click', 'success', `"${buttonName}" button clicked successfully`);
            }
        });
    </script>
</body>
</html>