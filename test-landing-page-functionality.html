<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Landing Page Functionality - GlucoBalance</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/components.css">
    <style>
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }
        
        .test-section {
            margin: 2rem 0;
            padding: 1.5rem;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            background: #f9f9f9;
        }
        
        .test-title {
            color: #007FFF;
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }
        
        .test-result {
            margin-top: 1rem;
            padding: 1rem;
            border-radius: 6px;
            font-weight: 500;
        }
        
        .success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        
        .test-button {
            background: #007FFF;
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1rem;
            margin: 0.5rem 0.5rem 0.5rem 0;
            transition: all 0.2s ease;
        }
        
        .test-button:hover {
            background: #005A9E;
            transform: translateY(-1px);
        }
        
        .nav-test {
            background: white;
            padding: 1rem;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
        }
        
        .features-test {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }
        
        .feature-card-test {
            background: white;
            padding: 1.5rem;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        
        .feature-card-test:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 25px rgba(0, 127, 255, 0.15);
            border-color: #007FFF;
        }
        
        .feature-icon {
            font-size: 2rem;
            margin-bottom: 1rem;
        }
        
        .console-output {
            background: #1e1e1e;
            color: #00ff00;
            padding: 1rem;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            max-height: 200px;
            overflow-y: auto;
            margin-top: 1rem;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1 style="text-align: center; color: #007FFF; margin-bottom: 2rem;">
            ğŸ§ª Landing Page Functionality Test
        </h1>
        
        <!-- Navigation Buttons Test -->
        <div class="test-section">
            <div class="test-title">ğŸ”— Navigation Buttons Test</div>
            <p>Testing the main navigation buttons functionality:</p>
            
            <div class="nav-test">
                <button id="nav-get-started-btn" class="test-button">Get Started Free</button>
                <button id="nav-dashboard-btn" class="test-button">Dashboard</button>
                <button id="nav-signup-btn" class="test-button">Sign Up</button>
            </div>
            
            <button class="test-button" onclick="testNavigationButtons()">ğŸ§ª Test Navigation</button>
            <div id="nav-test-result" class="test-result info" style="display: none;">
                Testing navigation buttons...
            </div>
        </div>
        
        <!-- Feature Cards Test -->
        <div class="test-section">
            <div class="test-title">ğŸ¯ Feature Cards Test</div>
            <p>Testing the clickable feature cards:</p>
            
            <div class="features-test">
                <div class="feature-card-test clickable" data-feature="risk-assessment">
                    <div class="feature-icon">ğŸ¯</div>
                    <h3>Risk Assessment</h3>
                    <p>WHO/ADA-compliant questionnaire with AI-powered insights</p>
                </div>
                
                <div class="feature-card-test clickable" data-feature="nutrition">
                    <div class="feature-icon">ğŸ</div>
                    <h3>Nutrition Planning</h3>
                    <p>Personalized meal plans adapted to your local cuisine</p>
                </div>
                
                <div class="feature-card-test clickable" data-feature="mental-health">
                    <div class="feature-icon">ğŸ’™</div>
                    <h3>Mental Health</h3>
                    <p>Daily mood tracking with AI-generated support</p>
                </div>
                
                <div class="feature-card-test clickable" data-feature="progress">
                    <div class="feature-icon">ğŸ“Š</div>
                    <h3>Progress Tracking</h3>
                    <p>Visual insights and comprehensive health reports</p>
                </div>
            </div>
            
            <button class="test-button" onclick="testFeatureCards()">ğŸ§ª Test Feature Cards</button>
            <div id="cards-test-result" class="test-result info" style="display: none;">
                Testing feature cards...
            </div>
        </div>
        
        <!-- Modal Test -->
        <div class="test-section">
            <div class="test-title">ğŸ“‹ Modal Functionality Test</div>
            <p>Testing the feature modal display:</p>
            
            <button class="test-button" onclick="testModal()">ğŸ§ª Test Modal</button>
            <div id="modal-test-result" class="test-result info" style="display: none;">
                Testing modal functionality...
            </div>
        </div>
        
        <!-- Console Output -->
        <div class="test-section">
            <div class="test-title">ğŸ“ Console Output</div>
            <p>Real-time console messages:</p>
            <div id="console-output" class="console-output">
                Console messages will appear here...
            </div>
        </div>
        
        <!-- Overall Status -->
        <div class="test-section">
            <div class="test-title">ğŸ“Š Test Summary</div>
            <div id="test-summary" class="test-result info">
                Run the tests above to see the overall status.
            </div>
        </div>
    </div>

    <!-- Feature Modal -->
    <div id="feature-modal" class="modal-overlay">
        <div class="modal-content feature-modal">
            <div class="modal-header">
                <h2 id="modal-title">Feature Details</h2>
                <button class="close-btn" id="modal-close">&times;</button>
            </div>
            <div class="modal-body" id="modal-body">
                <!-- Feature details will be populated by JavaScript -->
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" id="modal-cancel">Cancel</button>
                <button class="btn-primary" id="modal-action">Get Started</button>
            </div>
        </div>
    </div>

    <!-- Load Scripts -->
    <script src="js/error-handler.js"></script>
    <script src="js/database.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/auth-ui.js"></script>
    <script src="js/landing-page.js"></script>
    <script src="js/app.js"></script>
    
    <script>
        // Test tracking
        let testResults = {
            navigation: false,
            featureCards: false,
            modal: false
        };
        
        // Console output capture
        const consoleOutput = document.getElementById('console-output');
        const originalLog = console.log;
        const originalError = console.error;
        
        console.log = function(...args) {
            originalLog.apply(console, args);
            consoleOutput.innerHTML += `<div style="color: #00ff00;">[LOG] ${args.join(' ')}</div>`;
            consoleOutput.scrollTop = consoleOutput.scrollHeight;
        };
        
        console.error = function(...args) {
            originalError.apply(console, args);
            consoleOutput.innerHTML += `<div style="color: #ff6b6b;">[ERROR] ${args.join(' ')}</div>`;
            consoleOutput.scrollTop = consoleOutput.scrollHeight;
        };
        
        // Initialize when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸš€ Test page loaded, initializing...');
            
            setTimeout(() => {
                try {
                    // Initialize landing page manager
                    if (typeof LandingPageManager !== 'undefined' && !window.landingPageManager) {
                        window.landingPageManager = new LandingPageManager();
                        console.log('âœ… Landing page manager initialized');
                    }
                    
                    // Initialize main app
                    if (typeof GlucoBalanceApp !== 'undefined' && !window.glucoApp) {
                        window.glucoApp = new GlucoBalanceApp();
                        console.log('âœ… Main app initialized');
                    }
                    
                    console.log('ğŸ‰ Test initialization complete!');
                } catch (error) {
                    console.error('âŒ Test initialization failed:', error);
                }
            }, 500);
        });
        
        // Test navigation buttons
        function testNavigationButtons() {
            const resultDiv = document.getElementById('nav-test-result');
            resultDiv.style.display = 'block';
            resultDiv.className = 'test-result info';
            resultDiv.innerHTML = 'ğŸ”„ Testing navigation buttons...';
            
            let passed = 0;
            let total = 3;
            
            // Test Get Started button
            const getStartedBtn = document.getElementById('nav-get-started-btn');
            if (getStartedBtn) {
                getStartedBtn.addEventListener('click', () => {
                    console.log('âœ… Get Started button clicked');
                });
                passed++;
            } else {
                console.error('âŒ Get Started button not found');
            }
            
            // Test Dashboard button
            const dashboardBtn = document.getElementById('nav-dashboard-btn');
            if (dashboardBtn) {
                dashboardBtn.addEventListener('click', () => {
                    console.log('âœ… Dashboard button clicked');
                });
                passed++;
            } else {
                console.error('âŒ Dashboard button not found');
            }
            
            // Test Sign Up button
            const signupBtn = document.getElementById('nav-signup-btn');
            if (signupBtn) {
                signupBtn.addEventListener('click', () => {
                    console.log('âœ… Sign Up button clicked');
                });
                passed++;
            } else {
                console.error('âŒ Sign Up button not found');
            }
            
            // Check if landing page manager is available
            if (window.landingPageManager) {
                console.log('âœ… Landing page manager is available');
                testResults.navigation = true;
                resultDiv.className = 'test-result success';
                resultDiv.innerHTML = `âœ… Navigation test passed! (${passed}/${total} buttons found, Landing Page Manager available)`;
            } else {
                console.error('âŒ Landing page manager not available');
                resultDiv.className = 'test-result error';
                resultDiv.innerHTML = `âŒ Navigation test failed! Landing Page Manager not initialized`;
            }
            
            updateTestSummary();
        }
        
        // Test feature cards
        function testFeatureCards() {
            const resultDiv = document.getElementById('cards-test-result');
            resultDiv.style.display = 'block';
            resultDiv.className = 'test-result info';
            resultDiv.innerHTML = 'ğŸ”„ Testing feature cards...';
            
            const cards = document.querySelectorAll('.feature-card-test.clickable');
            console.log(`Found ${cards.length} feature cards`);
            
            let workingCards = 0;
            
            cards.forEach(card => {
                const feature = card.dataset.feature;
                card.addEventListener('click', () => {
                    console.log(`âœ… Feature card clicked: ${feature}`);
                    
                    // Test if landing page manager can handle the click
                    if (window.landingPageManager && typeof window.landingPageManager.handleFeatureCardClick === 'function') {
                        try {
                            window.landingPageManager.handleFeatureCardClick(feature);
                            console.log(`âœ… Feature card handler executed for: ${feature}`);
                        } catch (error) {
                            console.error(`âŒ Feature card handler failed for ${feature}:`, error);
                        }
                    } else {
                        console.error('âŒ Landing page manager or handler not available');
                    }
                });
                workingCards++;
            });
            
            if (workingCards === cards.length && window.landingPageManager) {
                testResults.featureCards = true;
                resultDiv.className = 'test-result success';
                resultDiv.innerHTML = `âœ… Feature cards test passed! (${workingCards}/${cards.length} cards working)`;
            } else {
                resultDiv.className = 'test-result error';
                resultDiv.innerHTML = `âŒ Feature cards test failed! (${workingCards}/${cards.length} cards working)`;
            }
            
            updateTestSummary();
        }
        
        // Test modal
        function testModal() {
            const resultDiv = document.getElementById('modal-test-result');
            resultDiv.style.display = 'block';
            resultDiv.className = 'test-result info';
            resultDiv.innerHTML = 'ğŸ”„ Testing modal functionality...';
            
            const modal = document.getElementById('feature-modal');
            const modalTitle = document.getElementById('modal-title');
            const modalBody = document.getElementById('modal-body');
            const modalClose = document.getElementById('modal-close');
            const modalCancel = document.getElementById('modal-cancel');
            const modalAction = document.getElementById('modal-action');
            
            let checks = {
                modal: !!modal,
                title: !!modalTitle,
                body: !!modalBody,
                close: !!modalClose,
                cancel: !!modalCancel,
                action: !!modalAction
            };
            
            const passedChecks = Object.values(checks).filter(check => check).length;
            const totalChecks = Object.keys(checks).length;
            
            console.log(`Modal elements check: ${passedChecks}/${totalChecks} found`);
            
            if (passedChecks === totalChecks) {
                // Test modal show/hide
                try {
                    modal.classList.add('active');
                    modalTitle.textContent = 'Test Modal';
                    modalBody.innerHTML = '<p>This is a test modal!</p>';
                    
                    setTimeout(() => {
                        modal.classList.remove('active');
                        console.log('âœ… Modal show/hide test successful');
                        
                        testResults.modal = true;
                        resultDiv.className = 'test-result success';
                        resultDiv.innerHTML = 'âœ… Modal test passed! All elements found and functional';
                        updateTestSummary();
                    }, 2000);
                } catch (error) {
                    console.error('âŒ Modal functionality test failed:', error);
                    resultDiv.className = 'test-result error';
                    resultDiv.innerHTML = 'âŒ Modal test failed! Functionality error';
                }
            } else {
                console.error('âŒ Modal elements missing');
                resultDiv.className = 'test-result error';
                resultDiv.innerHTML = `âŒ Modal test failed! (${passedChecks}/${totalChecks} elements found)`;
            }
            
            updateTestSummary();
        }
        
        // Update test summary
        function updateTestSummary() {
            const summaryDiv = document.getElementById('test-summary');
            const passedTests = Object.values(testResults).filter(result => result).length;
            const totalTests = Object.keys(testResults).length;
            
            let summaryHTML = `
                <strong>Test Results: ${passedTests}/${totalTests} tests passed</strong><br><br>
                ğŸ”— Navigation Buttons: ${testResults.navigation ? 'âœ… PASSED' : 'â³ Not tested'}<br>
                ğŸ¯ Feature Cards: ${testResults.featureCards ? 'âœ… PASSED' : 'â³ Not tested'}<br>
                ğŸ“‹ Modal Functionality: ${testResults.modal ? 'âœ… PASSED' : 'â³ Not tested'}
            `;
            
            if (passedTests === totalTests) {
                summaryHTML += '<br><br><strong style="color: #155724;">ğŸ‰ All tests passed! Landing page is working correctly.</strong>';
                summaryDiv.className = 'test-result success';
            } else if (passedTests > 0) {
                summaryHTML += '<br><br><strong style="color: #856404;">âš ï¸ Some tests passed. Check failed tests above.</strong>';
                summaryDiv.className = 'test-result info';
            } else {
                summaryHTML += '<br><br><strong style="color: #721c24;">âŒ No tests passed. Check console for errors.</strong>';
                summaryDiv.className = 'test-result error';
            }
            
            summaryDiv.innerHTML = summaryHTML;
        }
        
        // Initialize test summary
        updateTestSummary();
        
        console.log('ğŸ§ª Test functions loaded. Available tests:');
        console.log('- testNavigationButtons()');
        console.log('- testFeatureCards()');
        console.log('- testModal()');
    </script>
</body>
</html>